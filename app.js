!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class a{static getFrame(e){const t=document.createElement("div");t.setAttribute("class","frame");const n=document.createElement("div");n.setAttribute("class","frame-number"),n.innerText=e;const a=document.createElement("div");a.setAttribute("class","delete-frame");const s=document.createElement("div");s.setAttribute("class","copy-frame");const r=document.createElement("canvas");return r.setAttribute("class","frame-canvas"),r.setAttribute("height","500"),r.setAttribute("width","500"),t.appendChild(n),t.appendChild(a),t.appendChild(s),t.appendChild(r),t}static getElem(e){return document.querySelector(e)}static updateFrameNumbers(){let e=1;[...a.getElem(".frames-wrapper").children].map(e=>[...e.children].filter(e=>e.classList.contains("frame-number"))).flat().forEach(t=>{t.innerText=e,e+=1})}}class s{static start(){const{body:e}=document;e.innerHTML='\n        <header class="header">\n            <div class="menu-button"></div>\n            <h1 class="header-h1">Piskel Clone</h1>\n            <div class="context-menu"></div>\n        </header>\n        <main class="main">\n            <section class="tools-wrapper">\n                <div class="pen-sizes">\n                    <span class="pen-sizes__title">Pen\'s sizes</span>\n                    <div class="pen-sizes__10 active-pen"></div>\n                    <div class="pen-sizes__25"></div>\n                    <div class="pen-sizes__40"></div>\n                </div>\n                <div class="colors-wrapper">\n                    <label for="custom-color">Choose color</label>\n                    <input class="custom-color" type="color" id="custom-color">\n                    <div class="current-color"></div>\n                    <div class="previous-color"></div>\n                </div>\n            </section>\n            <div class="frames-wrapper">\n                <button class="new-frame-button">Add new frame</button>\n            </div>\n            <div class="canvas-wrapper">\n                <canvas class="main-canvas" height="500" width="500"></canvas>\n            </div>\n            <div class="preview-wrapper">\n                <div class="animation">\n                    <canvas class="animation-canvas" height="500" width="500"></canvas>\n                </div>\n                <input class="range" type="range" min="1" max="24" step="1" value="0">\n                <div class="tooltip">1 fps</div>\n                <button class="full-screen-button">Full screen</button>\n            </div>\n        </main>\n    ';const t=document.querySelector(".new-frame-button"),n=document.querySelector(".frames-wrapper"),s=a.getFrame(1);s.classList.add("active-frame"),n.insertBefore(s,t)}}!function(){s.start();const e=a.getElem(".range"),t=a.getElem(".tooltip"),n=a.getElem(".main-canvas"),r=a.getElem(".frames-wrapper"),c=a.getElem(".full-screen-button"),i=a.getElem(".animation-canvas"),o=a.getElem(".tools-wrapper"),l=a.getElem(".current-color"),d=a.getElem(".previous-color"),u=a.getElem("#custom-color"),m=n.getContext("2d");function p(e,t){[...t.children].forEach(t=>{t.classList.contains(e)&&t.classList.remove(e)})}function v(e,t){const n=e.getContext("2d").getImageData(0,0,500,500);t.getContext("2d").putImageData(n,0,0,0,0,500,500)}let f;function g(e){const t=[...a.getElem(".frames-wrapper").children].slice(0,-1).map(e=>[...e.children]).flat().filter(e=>"CANVAS"===e.tagName);void 0!==f&&clearInterval(f);let n=0;f=setInterval(function(){n>=t.length&&(n=0),v(t[n],i),n+=1},1e3/e)}let b=10,h=10;function y(e){return window.getComputedStyle(e).backgroundColor}e.addEventListener("change",e=>{t.innerText=`${e.target.value} fps`,g(e.target.value)});let E=!1;n.addEventListener("mousedown",()=>{E=!0}),n.addEventListener("mouseup",()=>{E=!1,m.beginPath();const t=a.getElem(".frames-wrapper").querySelector(".active-frame").querySelector("canvas");v(n,t),g(e.value)}),n.addEventListener("mousemove",e=>{E&&function(e,t){m.beginPath(),m.rect(e,t,h,b),m.fill(),m.beginPath(),m.moveTo(e,t)}(e.pageX-n.parentNode.offsetLeft,e.pageY-n.parentNode.offsetTop)}),r.addEventListener("click",t=>{const s=t.target;if(s.classList.contains("frame")||s.classList.contains("frame-canvas"))p("active-frame",a.getElem(".frames-wrapper")),s.classList.contains("frame-canvas")?(s.parentNode.classList.add("active-frame"),v(s,n)):(s.classList.add("active-frame"),v(s.querySelector("canvas"),n)),g(e.value);else if(s.classList.contains("new-frame-button")){const t=a.getFrame(r.children.length);r.insertBefore(t,s),g(e.value)}else if(s.classList.contains("delete-frame")){if(r.children.length<3){s.parentNode.classList.add("active-frame");const t=s.parentNode.querySelector("canvas");return t.getContext("2d").clearRect(0,0,500,500),v(t,n),void g(e.value)}r.removeChild(s.parentNode),a.updateFrameNumbers(),g(e.value)}else if(s.classList.contains("copy-frame")){const t=s.parentNode.querySelector("canvas"),n=s.parentNode.cloneNode(!0);v(t,n.querySelector("canvas")),r.insertBefore(n,s.parentNode.nextSibling),s.parentNode.classList.remove("active-frame"),a.updateFrameNumbers(),g(e.value)}}),c.addEventListener("click",()=>{i.webkitRequestFullScreen(),i.style.backgroundColor="#ffffff"}),o.addEventListener("click",e=>{const t=e.target;if(t.classList.contains("pen-sizes__10"))p("active-pen",t.parentNode),b=10,h=10,t.classList.add("active-pen");else if(t.classList.contains("pen-sizes__25"))p("active-pen",t.parentNode),b=25,h=25,t.classList.add("active-pen");else if(t.classList.contains("pen-sizes__40"))p("active-pen",t.parentNode),b=40,h=40,t.classList.add("active-pen");else if(t===d){const e=y(l);l.style.backgroundColor=y(d),m.fillStyle=y(d),d.style.backgroundColor=e}}),u.addEventListener("change",e=>{d.style.backgroundColor=y(l),l.style.backgroundColor=e.target.value,m.fillStyle=e.target.value})}()}]);